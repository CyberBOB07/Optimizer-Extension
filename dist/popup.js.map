{"version":3,"file":"popup.js","mappings":"AACAA,SAASC,iBAAiB,oBAAoB,WAC1C,IAAMC,EAAeF,SAASG,eAAe,cAG7CC,OAAOC,QAAQC,MAAMC,IAAI,CAAC,mBAAmB,SAACC,GAC1CC,QAAQC,IAAI,kBAAmBF,GAE/B,IAAMG,OAAuCC,IAA1BJ,EAAOK,gBAA+BL,EAAOK,eAChEX,EAAaY,QAAUH,CAC3B,IAGAT,EAAaD,iBAAiB,UAAU,WACpC,IAAMY,EAAiBX,EAAaY,QACpCL,QAAQC,IAAI,yBAA0BG,GAGtCT,OAAOW,KAAKC,MAAM,CAAEC,QAAQ,EAAMC,eAAe,IAAQ,SAACH,GAClDA,EAAK,GAAGI,IAAIC,SAAS,oBACrBhB,OAAOW,KAAKM,YAAYN,EAAK,GAAGO,GAAI,CAChCC,KAAM,qBACNC,KAAMX,IACP,SAACY,GACIrB,OAAOsB,QAAQC,WACflB,QAAQC,IAAI,SAAUN,OAAOsB,QAAQC,WAErCzB,EAAaY,SAAWD,GACjBY,GAAYA,EAASG,SAC5BnB,QAAQC,IAAI,+BAEZN,OAAOC,QAAQC,MAAMuB,IAAI,CAAEhB,eAAAA,MAE3BJ,QAAQC,IAAI,2BAA4Be,GAExCvB,EAAaY,SAAWD,EAEhC,GAER,GACJ,GACJ","sources":["webpack://tradingview-optimizer/./src/popup.js"],"sourcesContent":["// При загрузке popup\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    const toggleSwitch = document.getElementById('showOnPage');\r\n    \r\n    // Загрузка состояния переключателя\r\n    chrome.storage.local.get(['showInfoWindow'], (result) => {\r\n        console.log('Loaded storage:', result);\r\n        // Включено по умолчанию\r\n        const showWindow = result.showInfoWindow !== undefined ? result.showInfoWindow : true;\r\n        toggleSwitch.checked = showWindow;\r\n    });\r\n\r\n    // Обработчик изменения переключателя\r\n    toggleSwitch.addEventListener('change', () => {\r\n        const showInfoWindow = toggleSwitch.checked;\r\n        console.log('Toggle switch changed:', showInfoWindow);\r\n        \r\n        // Отправляем сообщение в content script только на TradingView\r\n        chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\r\n            if (tabs[0].url.includes('tradingview.com')) {\r\n                chrome.tabs.sendMessage(tabs[0].id, { \r\n                    type: 'TOGGLE_INFO_WINDOW',\r\n                    show: showInfoWindow\r\n                }, (response) => {\r\n                    if (chrome.runtime.lastError) {\r\n                        console.log('Error:', chrome.runtime.lastError);\r\n                        // В случае ошибки возвращаем переключатель в предыдущее состояние\r\n                        toggleSwitch.checked = !showInfoWindow;\r\n                    } else if (response && response.success) {\r\n                        console.log('Window toggled successfully');\r\n                        // Сохраняем состояние только после успешного переключения\r\n                        chrome.storage.local.set({ showInfoWindow });\r\n                    } else {\r\n                        console.log('Failed to toggle window:', response);\r\n                        // В случае ошибки возвращаем переключатель в предыдущее состояние\r\n                        toggleSwitch.checked = !showInfoWindow;\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    });\r\n});\r\n"],"names":["document","addEventListener","toggleSwitch","getElementById","chrome","storage","local","get","result","console","log","showWindow","undefined","showInfoWindow","checked","tabs","query","active","currentWindow","url","includes","sendMessage","id","type","show","response","runtime","lastError","success","set"],"sourceRoot":""}