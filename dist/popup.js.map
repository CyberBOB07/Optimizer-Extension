{"version":3,"file":"popup.js","mappings":"AACAA,SAASC,iBAAiB,oBAAoB,WAC1C,IAAMC,EAAeF,SAASG,eAAe,cAG7CC,OAAOC,QAAQC,MAAMC,IAAI,CAAC,mBAAmB,SAACC,GAC1CC,QAAQC,IAAI,kBAAmBF,GAE/B,IAAMG,OAAuCC,IAA1BJ,EAAOK,gBAA+BL,EAAOK,eAChEX,EAAaY,QAAUH,CAC3B,IAGAT,EAAaD,iBAAiB,UAAU,WACpC,IAAMY,EAAiBX,EAAaY,QACpCL,QAAQC,IAAI,yBAA0BG,GAGtCT,OAAOW,KAAKC,MAAM,CAAEC,QAAQ,EAAMC,eAAe,IAAQ,SAACH,GAClDA,EAAK,GAAGI,IAAIC,SAAS,oBACrBhB,OAAOW,KAAKM,YAAYN,EAAK,GAAGO,GAAI,CAChCC,KAAM,qBACNC,KAAMX,IACP,SAACY,GACIrB,OAAOsB,QAAQC,WACflB,QAAQC,IAAI,SAAUN,OAAOsB,QAAQC,WAErCzB,EAAaY,SAAWD,GACjBY,GAAYA,EAASG,SAC5BnB,QAAQC,IAAI,+BAEZN,OAAOC,QAAQC,MAAMuB,IAAI,CAAEhB,eAAAA,MAE3BJ,QAAQC,IAAI,2BAA4Be,GAExCvB,EAAaY,SAAWD,EAEhC,GAER,GACJ,GACJ","sources":["webpack://tradingview-optimizer/./src/popup.js"],"sourcesContent":["// При загрузке popup\ndocument.addEventListener('DOMContentLoaded', () => {\n    const toggleSwitch = document.getElementById('showOnPage');\n    \n    // Загрузка состояния переключателя\n    chrome.storage.local.get(['showInfoWindow'], (result) => {\n        console.log('Loaded storage:', result);\n        // Включено по умолчанию\n        const showWindow = result.showInfoWindow !== undefined ? result.showInfoWindow : true;\n        toggleSwitch.checked = showWindow;\n    });\n\n    // Обработчик изменения переключателя\n    toggleSwitch.addEventListener('change', () => {\n        const showInfoWindow = toggleSwitch.checked;\n        console.log('Toggle switch changed:', showInfoWindow);\n        \n        // Отправляем сообщение в content script только на TradingView\n        chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n            if (tabs[0].url.includes('tradingview.com')) {\n                chrome.tabs.sendMessage(tabs[0].id, { \n                    type: 'TOGGLE_INFO_WINDOW',\n                    show: showInfoWindow\n                }, (response) => {\n                    if (chrome.runtime.lastError) {\n                        console.log('Error:', chrome.runtime.lastError);\n                        // В случае ошибки возвращаем переключатель в предыдущее состояние\n                        toggleSwitch.checked = !showInfoWindow;\n                    } else if (response && response.success) {\n                        console.log('Window toggled successfully');\n                        // Сохраняем состояние только после успешного переключения\n                        chrome.storage.local.set({ showInfoWindow });\n                    } else {\n                        console.log('Failed to toggle window:', response);\n                        // В случае ошибки возвращаем переключатель в предыдущее состояние\n                        toggleSwitch.checked = !showInfoWindow;\n                    }\n                });\n            }\n        });\n    });\n});\n"],"names":["document","addEventListener","toggleSwitch","getElementById","chrome","storage","local","get","result","console","log","showWindow","undefined","showInfoWindow","checked","tabs","query","active","currentWindow","url","includes","sendMessage","id","type","show","response","runtime","lastError","success","set"],"sourceRoot":""}